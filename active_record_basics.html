<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Active Record 基础 - Rails 指南</title>
    <meta name="viewport" content="width=device-width" />
    <script src="http://docs-china.com/rails/scripts/docs.js"></script>
    <link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.1/css/bootstrap.min.css" />
    <link rel="stylesheet" href="http://docs-china.com/rails/scripts/docs.css" />
</head>
<body>
    <a class="sr-only" href="#content">跳到正文</a>

    <nav class="navbar navbar-static-top docs-nav" id="top">
        <div class="container">
            <div class="navbar-header">
                <a href="http://docs-china.com" class="navbar-brand" title="回到首页">&larr; Docs China</a>
            </div>
        </div>
    </nav>

    <header class="header" role="banner">
        <div class="container">
            <h1 class="logo"><a href="http://docs-china.com/rails/" title="Rails 指南">Rails 指南</a></h1>
            
            <iframe src="http://ghbtns.com/github-btn.html?user=docs-china&repo=&type=fork&count=false"
  allowtransparency="true" frameborder="0" scrolling="0" width="62" height="20"></iframe>
            
        </div>
    </header>

    <div id="content" class="content" role="main">
        <div class="container">
            <div class="row">
                <main class="main col-sm-9 col-md-9">
                    <article class="entry">
                        <h1>Active Record 基础</h1>
                        <p>本文介绍 Active Record。</p>

<p>读完本文后，你讲了解：</p>

<ul>
  <li>对象关系映射（Object Relational Mapping，ORM）和 Active Record 是什么，以及如何在 Rails 中使用；</li>
  <li>Active Record 在 MVC 中的作用；</li>
  <li>如果使用 Active Record 模型处理保存在关系型数据库中的数据；</li>
  <li>Active Record 模式（schema）命名约定；</li>
  <li>数据库迁移，数据验证和回调；</li>
</ul>

<hr />

<h2 id="what-is-active-record">Active Record 是什么？</h2>

<p>Active Record 是 <a href="http://docs-china.com/rails/getting_started.html#the-mvc-architecture">MVC</a> 中的 M（模型），处理数据和业务逻辑。Active Record 负责创建和使用需要持久存入数据库中的数据。Active Record 实现了 Active Record 模式，是一种对象关系映射系统。</p>

<h3 id="the-active-record-pattern">Active Record 模式</h3>

<p>Active Record 模式出自 <a href="http://www.martinfowler.com/eaaCatalog/activeRecord.html">Martin Fowler</a> 的《企业应用架构模式》一书。在 Active Record 模式中，对象中既有持久存储的数据，也有针对数据的操作。Active Record 模式把数据存取逻辑作为对象的一部分，处理对象的用户知道如何把数据写入数据库，以及从数据库中读出数据。</p>

<h3 id="object-relational-mapping">对象关系映射</h3>

<p>对象关系映射（ORM）是一种技术手段，把程序中的对象和关系型数据库中的数据表连接起来。使用 ORM，程序中对象的属性和对象之间的关系可以通过一种简单的方法从数据库获取，无需直接编写 SQL 语句，也不过度依赖特定的数据库种类。</p>

<h3 id="active-record-as-an-orm-framework">Active Record 用作 ORM 框架</h3>

<p>Active Record 提供了很多功能，其中最重要的几个如下：</p>

<ul>
  <li>表示模型和其中的数据；</li>
  <li>表示模型之间的关系；</li>
  <li>通过相关联的模型表示集成关系；</li>
  <li>持久存入数据库之前，验证模型；</li>
  <li>以面向对象的方式处理数据库操作；</li>
</ul>

<h2 id="convention-over-configuration-in-active-record">Active Record 中的“多约定少配置”原则</h2>

<p>使用其他编程语言或框架开发程序时，可能必须要编写很多配置代码。大多数的 ORM 框架都是这样。但是，如果遵循 Rails 的约定，创建 Active Record 模型时不用做多少配置（有时甚至完全不用配置）。Rails 的理念是，如果大多数情况下都要使用相同的方式配置程序，那么就应该把这定为默认的方法。所以，只有常规的方法无法满足要求时，才要额外的配置。</p>

<h3 id="naming-conventions">命名约定</h3>

<p>默认情况下，Active Record 使用一些命名约定，查找模型和数据表之间的映射关系。Rails 把模型的类名转换成复数，然后查找对应的数据表。例如，模型类名为 <code>Book</code>，数据表就是 <code>books</code>。Rails 提供的单复数变形功能很强大，常见和不常见的变形方式都能处理。如果类名由多个单词组成，应该按照 Ruby 的约定，使用驼峰式命名法，这时对应的数据表将使用下划线分隔各单词。因此：</p>

<ul>
  <li>数据表名：复数，下划线分隔单词（例如 <code>book_clubs</code>）</li>
  <li>模型类名：单数，每个单词的首字母大写（例如 <code>BookClub</code>）</li>
</ul>

<div class="table-responsive"><table>
  <thead>
    <tr>
      <th>模型 / 类</th>
      <th>数据表 / 模式</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Post</code></td>
      <td><code>posts</code></td>
    </tr>
    <tr>
      <td><code>LineItem</code></td>
      <td><code>line_items</code></td>
    </tr>
    <tr>
      <td><code>Deer</code></td>
      <td><code>deers</code></td>
    </tr>
    <tr>
      <td><code>Mouse</code></td>
      <td><code>mice</code></td>
    </tr>
    <tr>
      <td><code>Person</code></td>
      <td><code>people</code></td>
    </tr>
  </tbody>
</table>
</div>
<h3 id="schema-conventions">模式约定</h3>

<p>根据字段的作用不同，Active Record 对数据表中的字段命名也做了相应的约定：</p>

<ul>
  <li><strong>外键</strong> - 使用 <code>singularized_table_name_id</code> 形式命名，例如 <code>item_id</code>，<code>order_id</code>。创建模型关联后，Active Record 会查找这个字段；</li>
  <li><strong>主键</strong> - 默认情况下，Active Record 使用整数字段 <code>id</code> 作为表的主键。使用 <a href="http://docs-china.com/rails/migrations.html">Active Record 迁移</a>创建数据表时，会自动创建这个字段；</li>
</ul>

<p>还有一些可选的字段，能为 Active Record 实例添加更多的功能：</p>

<ul>
  <li><code>created_at</code> - 创建记录时，自动设为当前的时间戳；</li>
  <li><code>updated_at</code> - 更新记录时，自动设为当前的时间戳；</li>
  <li><code>lock_version</code> - 在模型中添加<a href="http://api.rubyonrails.org/classes/ActiveRecord/Locking.html">乐观锁定</a>功能；</li>
  <li><code>type</code> - 让模型使用<a href="http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Single+table+inheritance">单表集成</a>；</li>
  <li><code>(association_name)_type</code> - <a href="http://docs-china.com/rails/association_basics.html#polymorphic-associations">多态关联</a>的类型；</li>
  <li><code>(table_name)_count</code> - 缓存关联对象的数量。例如，<code>posts</code> 表中的 <code>comments_count</code> 字段，缓存每篇文章的评论数；</li>
</ul>

          <div class="box information-box">
  <p>虽然这些字段是可选的，但在 Active Record 中是被保留的。如果想使用相应的功能，就不要把这些保留字段用作其他用途。例如，<code>type</code> 这个保留字段是用来指定数据表使用“单表继承”（STI）的，如果不用 STI，请使用其他的名字，例如“context”，这也能表明该字段的作用。</p>
</div>


<h2 id="creating-active-record-models">创建 Active Record 模型</h2>

<p>创建 Active Record 模型的过程很简单，只要继承 <code>ActiveRecord::Base</code> 类就行了：</p>

<div class="codeblock ruby"><pre class="highlight"><span class="k">class</span> <span class="nc">Product</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
<span class="k">end</span>
</pre>

</div>
<p>上面的代码会创建 <code>Product</code> 模型，对应于数据库中的 <code>products</code> 表。同时，<code>products</code> 表中的字段也映射到 <code>Product</code> 模型实例的属性上。假如 <code>products</code> 表由厦门的 SQL 语句创建：</p>

<div class="codeblock sql"><pre class="highlight"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">products</span> <span class="p">(</span>
   <span class="n">id</span> <span class="n">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">auto_increment</span><span class="p">,</span>
   <span class="n">name</span> <span class="n">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
   <span class="k">PRIMARY</span> <span class="k">KEY</span>  <span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">);</span>
</pre>

</div>
<p>按照这样的数据表结构，可以编写出下面的代码：</p>

<div class="codeblock ruby"><pre class="highlight"><span class="nb">p</span> <span class="o">=</span> <span class="no">Product</span><span class="p">.</span><span class="nf">new</span>
<span class="nb">p</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s2">"Some Book"</span>
<span class="nb">puts</span> <span class="nb">p</span><span class="p">.</span><span class="nf">name</span> <span class="c1"># "Some Book"</span>
</pre>

</div>
<h2 id="overriding-the-naming-conventions">不用默认的命名约定</h2>

<p>如果想使用其他的命名约定，或者在 Rails 程序中使用即有的数据库可以吗？没问题，不用默认的命名约定也很简单。</p>

<p>使用 <code>ActiveRecord::Base.table_name=</code> 方法可以指定数据表的名字：</p>

<div class="codeblock ruby"><pre class="highlight"><span class="k">class</span> <span class="nc">Product</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="nb">self</span><span class="p">.</span><span class="nf">table_name</span> <span class="o">=</span> <span class="s2">"PRODUCT"</span>
<span class="k">end</span>
</pre>

</div>
<p>如果这么做，还要在测试中调用 <code>set_fixture_class</code> 方法，手动指定固件（<code>class_name.yml</code>）的类名：</p>

<div class="codeblock ruby"><pre class="highlight"><span class="k">class</span> <span class="nc">FunnyJoke</span> <span class="o">&lt;</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">TestCase</span>
  <span class="n">set_fixture_class</span> <span class="ss">funny_jokes: </span><span class="no">Joke</span>
  <span class="n">fixtures</span> <span class="ss">:funny_jokes</span>
  <span class="p">.</span><span class="nf">.</span><span class="o">.</span>
<span class="k">end</span>
</pre>

</div>
<p>还可以使用 <code>ActiveRecord::Base.primary_key=</code> 方法指定数据表的主键：</p>

<div class="codeblock ruby"><pre class="highlight"><span class="k">class</span> <span class="nc">Product</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="nb">self</span><span class="p">.</span><span class="nf">primary_key</span> <span class="o">=</span> <span class="s2">"product_id"</span>
<span class="k">end</span>
</pre>

</div>
<h2 id="crud-reading-and-writing-data">CRUD：读写数据</h2>

<p>CURD 是四种数据操作的简称：C 表示创建，R 表示读取，U 表示更新，D 表示删除。Active Record 自动创建了处理数据表中数据的方法。</p>

<h3 id="create">创建</h3>

<p>Active Record 对象可以使用 Hash 创建，在块中创建，或者创建后手动设置属性。<code>new</code> 方法创建一个新对象，<code>create</code> 方法创建新对象，并将其存入数据库。</p>

<p>例如，<code>User</code> 模型中有两个属性，<code>name</code> 和 <code>occupation</code>。调用 <code>create</code> 方法会创建一个新纪录，并存入数据库：</p>

<div class="codeblock ruby"><pre class="highlight"><span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="nb">name</span><span class="p">:</span> <span class="s2">"David"</span><span class="p">,</span> <span class="ss">occupation: </span><span class="s2">"Code Artist"</span><span class="p">)</span>
</pre>

</div>
<p>使用 <code>new</code> 方法，可以实例化一个新对象，但不会保存：</p>

<div class="codeblock ruby"><pre class="highlight"><span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">new</span>
<span class="n">user</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s2">"David"</span>
<span class="n">user</span><span class="p">.</span><span class="nf">occupation</span> <span class="o">=</span> <span class="s2">"Code Artist"</span>
</pre>

</div>
<p>调用 <code>user.save</code> 可以把记录存入数据库。</p>

<p>如果在 <code>create</code> 和 <code>new</code> 方法中使用块，会把新创建的对象拉入块中：</p>

<div class="codeblock ruby"><pre class="highlight"><span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">u</span><span class="o">|</span>
  <span class="n">u</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s2">"David"</span>
  <span class="n">u</span><span class="p">.</span><span class="nf">occupation</span> <span class="o">=</span> <span class="s2">"Code Artist"</span>
<span class="k">end</span>
</pre>

</div>
<h3 id="read">读取</h3>

<p>Active Record 为读取数据库中的数据提供了丰富的 API。下面举例说明。</p>

<div class="codeblock ruby"><pre class="highlight"><span class="c1"># return a collection with all users</span>
<span class="n">users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">all</span>
</pre>

</div>
<div class="codeblock ruby"><pre class="highlight"><span class="c1"># return the first user</span>
<span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">first</span>
</pre>

</div>
<div class="codeblock ruby"><pre class="highlight"><span class="c1"># return the first user named David</span>
<span class="n">david</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">find_by</span><span class="p">(</span><span class="nb">name</span><span class="p">:</span> <span class="s1">'David'</span><span class="p">)</span>
</pre>

</div>
<div class="codeblock ruby"><pre class="highlight"><span class="c1"># find all users named David who are Code Artists and sort by created_at</span>
<span class="c1"># in reverse chronological order</span>
<span class="n">users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="nb">name</span><span class="p">:</span> <span class="s1">'David'</span><span class="p">,</span> <span class="ss">occupation: </span><span class="s1">'Code Artist'</span><span class="p">).</span><span class="nf">order</span><span class="p">(</span><span class="s1">'created_at DESC'</span><span class="p">)</span>
</pre>

</div>
<p><a href="http://docs-china.com/rails/active_record_querying.html">Active Record 查询</a>一文会详细介绍查询 Active Record 模型的方法。</p>

<h3 id="update">更新</h3>

<p>得到 Active Record 对象后，可以修改其属性，然后再存入数据库。</p>

<div class="codeblock ruby"><pre class="highlight"><span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">find_by</span><span class="p">(</span><span class="nb">name</span><span class="p">:</span> <span class="s1">'David'</span><span class="p">)</span>
<span class="n">user</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Dave'</span>
<span class="n">user</span><span class="p">.</span><span class="nf">save</span>
</pre>

</div>
<p>还有个简写方式，使用 Hash，指定属性名和属性值，例如：</p>

<div class="codeblock ruby"><pre class="highlight"><span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">find_by</span><span class="p">(</span><span class="nb">name</span><span class="p">:</span> <span class="s1">'David'</span><span class="p">)</span>
<span class="n">user</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="nb">name</span><span class="p">:</span> <span class="s1">'Dave'</span><span class="p">)</span>
</pre>

</div>
<p>一次更新多个属性时使用这种方法很方便。如果想批量更新多个记录，可以使用类方法 <code>update_all</code>：</p>

<div class="codeblock ruby"><pre class="highlight"><span class="no">User</span><span class="p">.</span><span class="nf">update_all</span> <span class="s2">"max_login_attempts = 3, must_change_password = 'true'"</span>
</pre>

</div>
<h3 id="delete">删除</h3>

<p>类似地，得到 Active Record 对象后还可以将其销毁，从数据库中删除。</p>

<div class="codeblock ruby"><pre class="highlight"><span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">find_by</span><span class="p">(</span><span class="nb">name</span><span class="p">:</span> <span class="s1">'David'</span><span class="p">)</span>
<span class="n">user</span><span class="p">.</span><span class="nf">destroy</span>
</pre>

</div>
<h2 id="validations">数据验证</h2>

<p>在存入数据库之前，Active Record 还可以验证模型。模型验证有很多方法，可以检查属性值是否不为空、是否是唯一的，或者没有在数据库中出现过，等等。</p>

<p>把数据存入数据库之前进行验证是十分重要的步骤，所以调用 <code>create</code>、<code>save</code>、<code>update</code> 这三个方法时会做数据验证，验证失败时返回 <code>false</code>，此时不会对数据库做任何操作。这三个方法都要对应的爆炸方法（<code>create!</code>，<code>save!</code>，<code>update!</code>），爆炸方法要严格一些，如果验证失败，会抛出 <code>ActiveRecord::RecordInvalid</code> 异常。下面是个简单的例子：</p>

<div class="codeblock ruby"><pre class="highlight"><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">validates</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span>
<span class="k">end</span>

<span class="no">User</span><span class="p">.</span><span class="nf">create</span>  <span class="c1"># =&gt; false</span>
<span class="no">User</span><span class="p">.</span><span class="nf">create!</span> <span class="c1"># =&gt; ActiveRecord::RecordInvalid: Validation failed: Name can't be blank</span>
</pre>

</div>
<p><a href="http://docs-china.com/rails/active_record_validations.html">Active Record 数据验证</a>一文会详细介绍数据验证。</p>

<h2 id="callbacks">回调</h2>

<p>Active Record 回调可以在模型声明周期的特定事件上绑定代码，相应的事件发生时，执行这些代码。例如创建新纪录时，更新记录时，删除记录时，等等。<a href="http://docs-china.com/rails/active_record_callbacks.html">Active Record 回调</a>一文会详细介绍回调。</p>

<h2 id="migrations">迁移</h2>

<p>Rails 提供了一个 DSL 用来处理数据库模式，叫做“迁移”。迁移的代码存储在特定的文件中，通过 <code>rake</code> 调用，可以用在 Active Record 支持的所有数据库上。下面这个迁移会新建一个数据表：</p>

<div class="codeblock ruby"><pre class="highlight"><span class="k">class</span> <span class="nc">CreatePublications</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">create_table</span> <span class="ss">:publications</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:title</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">text</span> <span class="ss">:description</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">references</span> <span class="ss">:publication_type</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">integer</span> <span class="ss">:publisher_id</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:publisher_type</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">boolean</span> <span class="ss">:single_issue</span>

      <span class="n">t</span><span class="p">.</span><span class="nf">timestamps</span>
    <span class="k">end</span>
    <span class="n">add_index</span> <span class="ss">:publications</span><span class="p">,</span> <span class="ss">:publication_type_id</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre>

</div>
<p>Rails 会跟踪哪些迁移已经应用到数据库中，还提供了回滚功能。创建数据表要执行 <code>rake db:migrate</code> 命令；回滚操作要执行 <code>rake db:rollback</code> 命令。</p>

<p>注意，上面的代码和具体的数据库种类无法，可用于 MySQL、PostgreSQL、Oracle 等数据库。关于迁移的详细介绍，参阅 <a href="http://docs-china.com/rails/migrations.html">Active Record 迁移</a>一文。</p>

                    </article>
                    <div class="section-nav clearfix">
  <div class="pull-left">
    
      <a href="http://docs-china.com/rails/getting_started.html" class="prev">
        &laquo;前一篇
      </a>
    
  </div>
  <div class="pull-right">
    
      <a href="http://docs-china.com/rails/migrations.html" class="next">
        后一篇&raquo;
      </a>
    
  </div>
</div>

                </main>
                <div class="sidebar col-sm-3 col-md-3 hidden-xs">
                    <aside class="menu">
    
    <h4>起跑</h4>
    

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/getting_started.html">Rails 入门</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


</ul>

    
    <h4>模型</h4>
    

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
  
    
      <li class="current"><a href="http://docs-china.com/rails/active_record_basics.html">Active Record 基础</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/migrations.html">Active Record 数据库迁移</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/active_record_validations.html">Active Record 数据验证</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/active_record_callbacks.html">Active Record Callbacks</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/association_basics.html">Active Record 关联</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/active_record_querying.html">Active Record 查询</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


</ul>

    
    <h4>视图</h4>
    

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/action_view_overview.html">Action View 基础</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/layouts_and_rendering.html">Layouts and Rendering in Rails</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/form_helpers.html">表单帮助方法</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


</ul>

    
    <h4>控制器</h4>
    

<ul>

  

  
    
  

  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/action_controller_overview.html">Action Controller 简介</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/routing.html">Rails 路由全解</a></li>
    
  
    
  
    
  
    
  


</ul>

    
    <h4>深入</h4>
    

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/active_support_core_extensions.html">Active Support 核心扩展</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/i18n.html">Rails 国际化 API</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/action_mailer_basics.html">Action Mailer 基础</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/testing.html">Rails 程序测试指南</a></li>
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/security.html">Ruby on Rails 安全指南</a></li>
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/debugging_rails_applications.html">Rails 程序调试</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/configuring.html">Rails 程序设置</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/command_line.html">Rails 命令行</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/caching_with_rails.html">Caching with Rails An overview</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/asset_pipeline.html">Asset Pipeline</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/working_with_javascript_in_rails.html">在 Rails 中使用 JavaScript</a></li>
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/engines.html">Getting Started with Engines</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/initialization.html">Rails 初始化过程</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


</ul>

    
    <h4>扩展</h4>
    

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/plugins.html">Rails 插件开发基础</a></li>
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/rails_on_rack.html">Rails on Rack</a></li>
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/generators.html">Creating and Customizing Rails Generators & Templates</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


</ul>

    
</aside>


                </div>
            </div>
        </div>
    </div>

    <footer class="footer" role="contentinfo">
        <div class="container">
            <div>
                <ul class="social">
                    <li class="github">
                        <a href="https://github.com/docs-china/rails/" title="在 GitHub 上关注我们">Github</a>
                    </li>
                    <li class="weibo">
                        <a href="http://weibo.com/docschina" title="关注我们的微博">@DocsChina</a>
                    </li>
                </ul>
            </div>

            <p>本文档授权协议：<a href="http://creativecommons.org/licenses/by-sa/4.0/deed.zh" title="CC BY-SA 4.0">CC BY-SA 4.0</a></p>
        </div>
    </footer>
</body>
</html>
