<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Rails 命令行 - Rails 指南</title>
    <meta name="viewport" content="width=device-width" />
    <script src="http://docs-china.com/rails/scripts/docs.js"></script>
    <link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.1/css/bootstrap.min.css" />
    <link rel="stylesheet" href="http://docs-china.com/rails/scripts/docs.css" />
</head>
<body>
    <a class="sr-only" href="#content">跳到正文</a>

    <nav class="navbar navbar-static-top docs-nav" id="top">
        <div class="container">
            <div class="navbar-header">
                <a href="http://docs-china.com" class="navbar-brand" title="回到首页">&larr; Docs China</a>
            </div>
        </div>
    </nav>

    <header class="header" role="banner">
        <div class="container">
            <h1 class="logo"><a href="http://docs-china.com/rails/" title="Rails 指南">Rails 指南</a></h1>
            
            <iframe src="http://ghbtns.com/github-btn.html?user=docs-china&repo=rails&type=fork&count=false"
  allowtransparency="true" frameborder="0" scrolling="0" width="62" height="20"></iframe>
            
            <div class="menu-mobile visible-xs">
  <select onchange="if (this.value) window.location.href=this.value">
    <option value="">目录</option>
    
    <optgroup label="起跑">
      


  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/getting_started.html">Rails 入门</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


    </optgroup>
    
    <optgroup label="模型">
      


  

  
    
  
    
  
    
  
    
  
    
      <option value="/active_record_basics.html">Active Record 基础</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/migrations.html">Active Record 数据库迁移</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/active_record_validations.html">Active Record 数据验证</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/active_record_callbacks.html">Active Record 回调</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/association_basics.html">Active Record 关联</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/active_record_querying.html">Active Record 查询</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


    </optgroup>
    
    <optgroup label="视图">
      


  

  
    
  
    
  
    
  
    
      <option value="/action_view_overview.html">Action View 基础</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/layouts_and_rendering.html">Layouts and Rendering in Rails</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/form_helpers.html">表单帮助方法</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


    </optgroup>
    
    <optgroup label="控制器">
      


  

  
    
  
    
      <option value="/action_controller_overview.html">Action Controller 简介</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/routing.html">Rails 路由全解</option>
    
  
    
  
    
  
    
  


    </optgroup>
    
    <optgroup label="深入">
      


  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/active_support_core_extensions.html">Active Support 核心扩展</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/i18n.html">Rails 国际化 API</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
      <option value="/action_mailer_basics.html">Action Mailer 基础</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/testing.html">Rails 程序测试指南</option>
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/security.html">Ruby on Rails 安全指南</option>
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/debugging_rails_applications.html">Rails 程序调试</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/configuring.html">Rails 程序设置</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/command_line.html">Rails 命令行</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/caching_with_rails.html">Caching with Rails An overview</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/asset_pipeline.html">Asset Pipeline</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/working_with_javascript_in_rails.html">在 Rails 中使用 JavaScript</option>
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/engines.html">Getting Started with Engines</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/initialization.html">Rails 初始化过程</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


    </optgroup>
    
    <optgroup label="扩展">
      


  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/plugins.html">Rails 插件开发基础</option>
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/rails_on_rack.html">Rails on Rack</option>
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/generators.html">Creating and Customizing Rails Generators & Templates</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


    </optgroup>
    
  </select>
</div>

        </div>
    </header>

    <div id="content" class="content" role="main">
        <div class="container">
            <div class="row">
                <main class="main col-sm-9 col-md-9">
                    <article class="entry">
                        <h1>Rails 命令行</h1>
                        <p>读完本文后，你将学会：</p>

<ul>
  <li>如何新建 Rails 程序；</li>
  <li>如何生成模型、控制器、数据库迁移和单元测试；</li>
  <li>如何启动开发服务器；</li>
  <li>如果在交互 shell 中测试对象；</li>
  <li>如何分析、评测程序；</li>
</ul>

<hr />

          <div class="box information-box">
  <p>阅读本文前要具备一些 Rails 基础知识，可以阅读“<a href="http://docs-china.com/rails/getting_started.html">Rails 入门</a>”一文。</p>
</div>


<h2 id="command-line-basics">命令行基础</h2>

<p>有些命令在 Rails 开发过程中经常会用到，下面按照使用频率倒序列出：</p>

<ul>
  <li><code>rails console</code></li>
  <li><code>rails server</code></li>
  <li><code>rake</code></li>
  <li><code>rails generate</code></li>
  <li><code>rails dbconsole</code></li>
  <li><code>rails new app_name</code></li>
</ul>

<p>这些命令都可指定 <code>-h</code> 或 <code>--help</code> 选项显示具体用法。</p>

<p>下面我们来新建一个 Rails 程序，介绍各命令的用法。</p>

<h3 id="rails-new"><code>rails new</code></h3>

<p>安装 Rails 后首先要做的就是使用 <code>rails new</code> 命令新建 Rails 程序。</p>

          <div class="box information-box">
  <p>如果还没安装 Rails ，可以执行 <code>gem install rails</code> 命令安装。</p>
</div>


<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rails new commandsapp
     create
     create  README.rdoc
     create  Rakefile
     create  config.ru
     create  .gitignore
     create  Gemfile
     create  app
     ...
     create  tmp/cache
     ...
        run  bundle install
</pre>

</div>
<p>这个简单的命令会生成很多文件，组成一个完整的 Rails 程序，直接就可运行。</p>

<h3 id="rails-server"><code>rails server</code></h3>

<p><code>rails server</code> 命令会启动 Ruby 内建的小型服务器 WEBrick。要想在浏览器中访问程序，就要执行这个命令。</p>

<p>无需其他操作，执行 <code>rails server</code> 命令后就能运行刚创建的 Rails 程序：</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span><span class="nb">cd </span>commandsapp
<span class="gp">$ </span>rails server
<span class="gp">=&gt; </span>Booting WEBrick
<span class="gp">=&gt; </span>Rails 4.0.0 application starting <span class="k">in </span>development on http://0.0.0.0:3000
<span class="gp">=&gt; </span>Call with -d to detach
<span class="gp">=&gt; </span>Ctrl-C to shutdown server
<span class="o">[</span>2013-08-07 02:00:01] INFO  WEBrick 1.3.1
<span class="o">[</span>2013-08-07 02:00:01] INFO  ruby 2.0.0 <span class="o">(</span>2013-06-27<span class="o">)</span> <span class="o">[</span>x86_64-darwin11.2.0]
<span class="o">[</span>2013-08-07 02:00:01] INFO  WEBrick::HTTPServer#start: <span class="nv">pid</span><span class="o">=</span>69680 <span class="nv">port</span><span class="o">=</span>3000
</pre>

</div>
<p>只执行了三个命令，我们就启动了一个 Rails 服务器，监听端口 3000。打开浏览器，访问 <a href="http://localhost:3000">http://localhost:3000</a>，会看到一个简单的 Rails 程序。</p>

          <div class="box information-box">
  <p>启动服务器的命令还可使用别名“s”：<code>rails s</code>。</p>
</div>


<p>如果想让服务器监听其他端口，可通过 <code>-p</code> 选项指定。所处的环境可由 <code>-e</code> 选项指定。</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rails server -e production -p 4000
</pre>

</div>
<p><code>-b</code> 选项把 Rails 绑定到指定的 IP，默认 IP 是 0.0.0.0。指定 <code>-d</code> 选项后，服务器会以守护进程的形式运行。</p>

<h3 id="rails-generate"><code>rails generate</code></h3>

<p><code>rails generate</code> 使用模板生成很多东西。单独执行 <code>rails generate</code> 命令，会列出可用的生成器：</p>

          <div class="box information-box">
  <p>还可使用别名“g”执行生成器命令：<code>rails g</code>。</p>
</div>


<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rails generate
Usage: rails generate GENERATOR <span class="o">[</span>args] <span class="o">[</span>options]

...
...

Please choose a generator below.

Rails:
  assets
  controller
  generator
  ...
  ...
</pre>

</div>
          <div class="box information-box">
  <p>使用其他生成器 gem 可以安装更多的生成器，或者使用插件中提供的生成器，甚至还可以自己编写生成器。</p>
</div>


<p>使用生成器可以节省大量编写程序骨架的时间。</p>

<p>下面我们使用控制器生成器生成控制器。但应该使用哪个命令呢？我们问一下生成器：</p>

          <div class="box information-box">
  <p>所有的 Rails 命令都有帮助信息。和其他 *nix 命令一样，可以在命令后加上 <code>--help</code> 或 <code>-h</code> 选项，例如 <code>rails server --help</code>。</p>
</div>


<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rails generate controller
Usage: rails generate controller NAME <span class="o">[</span>action action] <span class="o">[</span>options]

...
...

Description:
    ...

    To create a controller within a module, specify the controller name as a
    path like <span class="s1">'parent_module/controller_name'</span>.

    ...

Example:
    <span class="sb">`</span>rails generate controller CreditCard open debit credit close<span class="sb">`</span>

    Credit card controller with URLs like /credit_card/debit.
        Controller: app/controllers/credit_card_controller.rb
        Test:       <span class="nb">test</span>/controllers/credit_card_controller_test.rb
        Views:      app/views/credit_card/debit.html.erb <span class="o">[</span>...]
        Helper:     app/helpers/credit_card_helper.rb
</pre>

</div>
<p>控制器生成器接受的参数形式是 <code>generate controller ControllerName action1 action2</code>。下面我们来生成 <code>Greetings</code> 控制器，包含一个动作 <code>hello</code>，跟读者打个招呼。</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rails generate controller Greetings hello
     create  app/controllers/greetings_controller.rb
      route  get <span class="s2">"greetings/hello"</span>
     invoke  erb
     create    app/views/greetings
     create    app/views/greetings/hello.html.erb
     invoke  test_unit
     create    <span class="nb">test</span>/controllers/greetings_controller_test.rb
     invoke  helper
     create    app/helpers/greetings_helper.rb
     invoke    test_unit
     create      <span class="nb">test</span>/helpers/greetings_helper_test.rb
     invoke  assets
     invoke    coffee
     create      app/assets/javascripts/greetings.js.coffee
     invoke    scss
     create      app/assets/stylesheets/greetings.css.scss
</pre>

</div>
<p>这个命令生成了什么呢？在程序中创建了一堆文件夹，还有控制器文件、视图文件、功能测试文件、视图帮助方法文件、JavaScript 文件盒样式表文件。</p>

<p>打开控制器文件（<code>app/controllers/greetings_controller.rb</code>），做些改动：</p>

<div class="codeblock ruby"><pre class="highlight"><span class="k">class</span> <span class="nc">GreetingsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">hello</span>
    <span class="vi">@message</span> <span class="o">=</span> <span class="s2">"Hello, how are you today?"</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre>

</div>
<p>然后修改视图文件（<code>app/views/greetings/hello.html.erb</code>），显示消息：</p>

<div class="codeblock erb"><pre class="highlight"><span class="nt">&lt;h1&gt;</span>A Greeting for You!<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@message</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
</pre>

</div>
<p>执行 <code>rails server</code> 命令启动服务器：</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rails server
<span class="gp">=&gt; </span>Booting WEBrick...
</pre>

</div>
<p>要查看的地址是 <a href="http://localhost:3000/greetings/hello">http://localhost:3000/greetings/hello</a>。</p>

          <div class="box information-box">
  <p>在常规的 Rails 程序中，URL 的格式是 http://(host)/(controller)/(action)，访问 http://(host)/(controller) 会进入控制器的 <code>index</code> 动作。</p>
</div>


<p>Rails 也为数据模型提供了生成器。</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rails generate model
Usage:
  rails generate model NAME <span class="o">[</span>field[:type][:index] field[:type][:index]] <span class="o">[</span>options]

...

Active Record options:
      <span class="o">[</span>--migration]            <span class="c"># Indicates when to generate migration</span>
                               <span class="c"># Default: true</span>

...

Description:
    Create rails files <span class="k">for </span>model generator.
</pre>

</div>
          <div class="box information-box">
  <p>全部可用的字段类型，请查看 <code>TableDefinition#column</code> 方法的<a href="http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html#method-i-column">文档</a>。</p>
</div>


<p>不过我们暂且不单独生成模型（后文再生成），先使用脚手架。Rails 中的脚手架会生成资源所需的全部文件，包括：模型，模型所用的迁移，处理模型的控制器，查看数据的视图，以及测试组件。</p>

<p>我们要创建一个名为“HighScore”的资源，记录视频游戏的最高得分。</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rails generate scaffold HighScore game:string score:integer
    invoke  active_record
    create    db/migrate/20130717151933_create_high_scores.rb
    create    app/models/high_score.rb
    invoke    test_unit
    create      <span class="nb">test</span>/models/high_score_test.rb
    create      <span class="nb">test</span>/fixtures/high_scores.yml
    invoke  resource_route
     route    resources :high_scores
    invoke  scaffold_controller
    create    app/controllers/high_scores_controller.rb
    invoke    erb
    create      app/views/high_scores
    create      app/views/high_scores/index.html.erb
    create      app/views/high_scores/edit.html.erb
    create      app/views/high_scores/show.html.erb
    create      app/views/high_scores/new.html.erb
    create      app/views/high_scores/_form.html.erb
    invoke    test_unit
    create      <span class="nb">test</span>/controllers/high_scores_controller_test.rb
    invoke    helper
    create      app/helpers/high_scores_helper.rb
    invoke      test_unit
    create        <span class="nb">test</span>/helpers/high_scores_helper_test.rb
    invoke    jbuilder
    create      app/views/high_scores/index.json.jbuilder
    create      app/views/high_scores/show.json.jbuilder
    invoke  assets
    invoke    coffee
    create      app/assets/javascripts/high_scores.js.coffee
    invoke    scss
    create      app/assets/stylesheets/high_scores.css.scss
    invoke  scss
   identical    app/assets/stylesheets/scaffolds.css.scss
</pre>

</div>
<p>这个生成器检测到以下各组件对应的文件夹已经存储在：模型，控制器，帮助方法，布局，功能测试，单元测试，样式表。然后创建“HighScore”资源的视图、控制器、模型和迁移文件（用来创建 <code>high_scores</code> 数据表和字段），并设置好路由，以及测试等。</p>

<p>我们要运行迁移，执行文件 <code>20130717151933_create_high_scores.rb</code> 中的代码，这才能修改数据库的模式。那么要修改哪个数据库呢？执行 <code>rake db:migrate</code> 命令后会生成 SQLite3 数据库。稍后再详细介绍 Rake。</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rake db:migrate
<span class="o">==</span>  CreateHighScores: migrating <span class="o">===============================================</span>
-- create_table<span class="o">(</span>:high_scores<span class="o">)</span>
   -&gt; 0.0017s
<span class="o">==</span>  CreateHighScores: migrated <span class="o">(</span>0.0019s<span class="o">)</span> <span class="o">======================================</span>
</pre>

</div>
          <div class="box information-box">
  <p>介绍一下单元测试。单元测试是用来测试代码、做断定的代码。在单元测试中，我们只关注代码的一部分，例如模型中的一个方法，测试其输入和输出。单元测试是你的好伙伴，你逐渐会意识到，单元测试的程度越高，生活的质量才能提上来。真的。稍后我们会编写一个单元测试。</p>
</div>


<p>我们来看一下 Rails 创建的界面。</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rails server
</pre>

</div>
<p>打开浏览器，访问 <a href="http://localhost:3000/high_scores">http://localhost:3000/high_scores</a>，现在可以创建新的最高得分了（太空入侵者得了 55,160 分）。</p>

<h3 id="rails-console"><code>rails console</code></h3>

<p>执行 <code>console</code> 命令后，可以在命令行中和 Rails 程序交互。<code>rails</code> console` 使用的是 IRB，所以如果你用过 IRB 的话，操作起来很顺手。在终端里可以快速测试想法，或者修改服务器端的数据，而无需在网站中操作。</p>

          <div class="box information-box">
  <p>这个命令还可以使用别名“c”：<code>rails c</code>。</p>
</div>


<p>执行 <code>console</code> 命令时可以指定终端在哪个环境中打开：</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rails console staging
</pre>

</div>
<p>如果你想测试一些代码，但不想改变存储的数据，可以执行 <code>rails console --sandbox</code>。</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rails console --sandbox
Loading development environment <span class="k">in </span>sandbox <span class="o">(</span>Rails 4.0.0<span class="o">)</span>
Any modifications you make will be rolled back on <span class="nb">exit
</span>irb<span class="o">(</span>main<span class="o">)</span>:001:0&gt;
</pre>

</div>
<h3 id="rails-dbconsole"><code>rails dbconsole</code></h3>

<p><code>rails dbconsole</code> 能检测到你正在使用的数据库类型（还能理解传入的命令行参数），然后进入该数据库的命令行界面。该命令支持 MySQL，PostgreSQL，SQLite 和 SQLite3。</p>

          <div class="box information-box">
  <p>这个命令还可使用别名“db”：<code>rails db</code>。</p>
</div>


<h3 id="rails-runner"><code>rails runner</code></h3>

<p><code>runner</code> 可以以非交互的方式在 Rails 中运行 Ruby 代码。例如：</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rails runner <span class="s2">"Model.long_running_method"</span>
</pre>

</div>
          <div class="box information-box">
  <p>这个命令还可使用别名“r”：<code>rails r</code>。</p>
</div>


<p>可使用 <code>-e</code> 选项指定 <code>runner</code> 命令在哪个环境中运行。</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rails runner -e staging <span class="s2">"Model.long_running_method"</span>
</pre>

</div>
<h3 id="rails-destroy"><code>rails destroy</code></h3>

<p><code>destroy</code> 可以理解成 <code>generate</code> 的逆操作，能识别生成了什么，然后将其删除。</p>

          <div class="box information-box">
  <p>这个命令还可使用别名“d”：<code>rails d</code>。</p>
</div>


<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rails generate model Oops
      invoke  active_record
      create    db/migrate/20120528062523_create_oops.rb
      create    app/models/oops.rb
      invoke    test_unit
      create      <span class="nb">test</span>/models/oops_test.rb
      create      <span class="nb">test</span>/fixtures/oops.yml
</pre>

</div>
<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rails destroy model Oops
      invoke  active_record
      remove    db/migrate/20120528062523_create_oops.rb
      remove    app/models/oops.rb
      invoke    test_unit
      remove      <span class="nb">test</span>/models/oops_test.rb
      remove      <span class="nb">test</span>/fixtures/oops.yml
</pre>

</div>
<h2 id="rake">Rake</h2>

<p>Rake 是 Ruby 领域的 Make，是个独立的 Ruby 工具，目的是代替 Unix 中的 make。Rake 根据 <code>Rakefile</code> 和 <code>.rake</code> 文件构建任务。Rails 使用 Rake 实现常见的管理任务，尤其是较为复杂的任务。</p>

<p>执行 <code>rake -- tasks</code> 命令可以列出所有可用的 Rake 任务，具体的任务根据所在文件夹会有所不同。每个任务都有描述信息，帮助你找到所需的命令。</p>

<p>要想查看执行 Rake 任务时的完整调用栈，可以在命令中使用 <code>--trace</code> 选项，例如 <code>rake db:create --trace</code>。</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rake --tasks
rake about              <span class="c"># List versions of all Rails frameworks and the environment</span>
rake assets:clean       <span class="c"># Remove compiled assets</span>
rake assets:precompile  <span class="c"># Compile all the assets named in config.assets.precompile</span>
rake db:create          <span class="c"># Create the database from config/database.yml for the current Rails.env</span>
...
rake log:clear          <span class="c"># Truncates all *.log files in log/ to zero bytes (specify which logs with LOGS=test,development)</span>
rake middleware         <span class="c"># Prints out your Rack middleware stack</span>
...
rake tmp:clear          <span class="c"># Clear session, cache, and socket files from tmp/ (narrow w/ tmp:sessions:clear, tmp:cache:clear, tmp:sockets:clear)</span>
rake tmp:create         <span class="c"># Creates tmp directories for sessions, cache, sockets, and pids</span>
</pre>

</div>
          <div class="box information-box">
  <p>还可以执行 <code>rake -T</code> 查看所有任务。</p>
</div>


<h3 id="about"><code>about</code></h3>

<p><code>rake about</code> 任务输出以下信息：Ruby、RubyGems、Rails 的版本号，Rails 使用的组件，程序所在的文件夹，Rails 当前所处的环境名，程序使用的数据库适配器，数据库模式版本号。如果想向他人需求帮助，检查安全补丁是否影响程序，或者需要查看现有 Rails 程序的信息，可以使用这个任务。</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rake about
About your application<span class="s1">'s environment
Ruby version              1.9.3 (x86_64-linux)
RubyGems version          1.3.6
Rack version              1.3
Rails version             4.1.0
JavaScript Runtime        Node.js (V8)
Active Record version     4.1.0
Action Pack version       4.1.0
Action View version       4.1.0
Action Mailer version     4.1.0
Active Support version    4.1.0
Middleware                Rack::Sendfile, ActionDispatch::Static, Rack::Lock, #&lt;ActiveSupport::Cache::Strategy::LocalCache::Middleware:0x007ffd131a7c88&gt;, Rack::Runtime, Rack::MethodOverride, ActionDispatch::RequestId, Rails::Rack::Logger, ActionDispatch::ShowExceptions, ActionDispatch::DebugExceptions, ActionDispatch::RemoteIp, ActionDispatch::Reloader, ActionDispatch::Callbacks, ActiveRecord::Migration::CheckPending, ActiveRecord::ConnectionAdapters::ConnectionManagement, ActiveRecord::QueryCache, ActionDispatch::Cookies, ActionDispatch::Session::CookieStore, ActionDispatch::Flash, ActionDispatch::ParamsParser, Rack::Head, Rack::ConditionalGet, Rack::ETag
Application root          /home/foobar/commandsapp
Environment               development
Database adapter          sqlite3
Database schema version   20110805173523
</span></pre>

</div>
<h3 id="assets"><code>assets</code></h3>

<p><code>rake assets:precompile</code> 任务会预编译 <code>app/assets</code> 文件夹中的静态资源文件。<code>rake assets:clean</code> 任务会把编译好的静态资源文件删除。</p>

<h3 id="db"><code>db</code></h3>

<p>Rake 命名空间 <code>db:</code> 中最常用的任务是 <code>migrate</code> 和 <code>create</code>，这两个任务会尝试运行所有迁移相关的 Rake 任务（<code>up</code>，<code>down</code>，<code>redo</code>，<code>reset</code>）。<code>rake db:version</code> 在排查问题时很有用，会输出数据库的当前版本。</p>

<p>关于数据库迁移的更多介绍，参阅“<a href="http://docs-china.com/rails/migrations.html">Active Record 数据库迁移</a>”一文。</p>

<h3 id="doc"><code>doc</code></h3>

<p><code>doc:</code> 命名空间中的任务可以生成程序的文档，Rails API 文档和 Rails 指南。生成的文档可以随意分割，减少程序的大小，适合在嵌入式平台使用。</p>

<ul>
  <li><code>rake doc:app</code> 在 <code>doc/app</code> 文件夹中生成程序的文档；</li>
  <li><code>rake doc:guides</code> 在 <code>doc/guides</code> 文件夹中生成 Rails 指南；</li>
  <li><code>rake doc:rails</code> 在 <code>doc/api</code> 文件夹中生成 Rails API 文档；</li>
</ul>

<h3 id="notes"><code>notes</code></h3>

<p><code>rake notes</code> 会搜索整个程序，寻找以 FIXME、OPTIMIZE 或 TODO 开头的注释。搜索的文件包括 <code>.builder</code>，<code>.rb</code>，<code>.erb</code>，<code>.haml</code>，<code>.slim</code>，<code>.css</code>，<code>.scss</code>，<code>.js</code>，<code>.coffee</code>，<code>.rake</code>，<code>.sass</code> 和 <code>.less</code>。搜索的内容包括默认注解和自定义注解。</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rake notes
<span class="o">(</span><span class="k">in</span> /home/foobar/commandsapp<span class="o">)</span>
app/controllers/admin/users_controller.rb:
  <span class="k">*</span> <span class="o">[</span> 20] <span class="o">[</span>TODO] any other way to <span class="k">do </span>this?
  <span class="k">*</span> <span class="o">[</span>132] <span class="o">[</span>FIXME] high priority <span class="k">for </span>next deploy

app/models/school.rb:
  <span class="k">*</span> <span class="o">[</span> 13] <span class="o">[</span>OPTIMIZE] refactor this code to make it faster
  <span class="k">*</span> <span class="o">[</span> 17] <span class="o">[</span>FIXME]
</pre>

</div>
<p>如果想查找特定的注解，例如 FIXME，可以执行 <code>rake notes:fixme</code> 任务。注意，在命令中注解的名字要使用小写形式。</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rake notes:fixme
<span class="o">(</span><span class="k">in</span> /home/foobar/commandsapp<span class="o">)</span>
app/controllers/admin/users_controller.rb:
  <span class="k">*</span> <span class="o">[</span>132] high priority <span class="k">for </span>next deploy

app/models/school.rb:
  <span class="k">*</span> <span class="o">[</span> 17]
</pre>

</div>
<p>在代码中可以使用自定义的注解，然后执行 <code>rake notes:custom</code> 任务，并使用 <code>ANNOTATION</code> 环境变量指定要查找的注解。</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>rake notes:custom <span class="nv">ANNOTATION</span><span class="o">=</span>BUG
<span class="o">(</span><span class="k">in</span> /home/foobar/commandsapp<span class="o">)</span>
app/models/post.rb:
  <span class="k">*</span> <span class="o">[</span> 23] Have to fix this one before pushing!
</pre>

</div>
          <div class="box information-box">
  <p>注意，不管查找的是默认的注解还是自定义的直接，注解名（例如 FIXME，BUG 等）不会在输出结果中显示。</p>
</div>


<p>默认情况下，<code>rake notes</code> 会搜索 <code>app</code>、<code>config</code>、<code>lib</code>、<code>bin</code> 和 <code>test</code> 这几个文件夹中的文件。如果想在其他的文件夹中查找，可以使用 <code>SOURCE_ANNOTATION_DIRECTORIES</code> 环境变量指定一个以逗号分隔的列表。</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span><span class="nb">export </span><span class="nv">SOURCE_ANNOTATION_DIRECTORIES</span><span class="o">=</span><span class="s1">'spec,vendor'</span>
<span class="gp">$ </span>rake notes
<span class="o">(</span><span class="k">in</span> /home/foobar/commandsapp<span class="o">)</span>
app/models/user.rb:
  <span class="k">*</span> <span class="o">[</span> 35] <span class="o">[</span>FIXME] User should have a subscription at this point
spec/models/user_spec.rb:
  <span class="k">*</span> <span class="o">[</span>122] <span class="o">[</span>TODO] Verify the user that has a subscription works
</pre>

</div>
<h3 id="routes"><code>routes</code></h3>

<p><code>rake routes</code> 会列出程序中定义的所有路由，可为解决路由问题提供帮助，还可以让你对程序中的所有 URL 有个整体了解。</p>

<h3 id="test"><code>test</code></h3>

          <div class="box information-box">
  <p>Rails 中的单元测试详情，参见“<a href="http://docs-china.com/rails/testing.html">Rails 程序测试指南</a>”一文。</p>
</div>


<p>Rails 提供了一个名为 Minitest 的测试组件。Rails 的稳定性也由测试决定。<code>test:</code> 命名空间中的任务可用于运行各种测试。</p>

<h3 id="tmp"><code>tmp</code></h3>

<p><code>Rails.root/tmp</code> 文件夹和 *nix 中的 <code>/tmp</code> 作用相同，用来存放临时文件，例如会话（如果使用文件存储会话）、PID 文件和缓存文件等。</p>

<p><code>tmp:</code> 命名空间中的任务可以清理或创建 <code>Rails.root/tmp</code> 文件夹：</p>

<ul>
  <li><code>rake tmp:cache:clear</code> 清理 <code>tmp/cache</code> 文件夹；</li>
  <li><code>rake tmp:sessions:clear</code> 清理 <code>tmp/sessions</code> 文件夹；</li>
  <li><code>rake tmp:sockets:clear</code> 清理 <code>tmp/sockets</code> 文件夹；</li>
  <li><code>rake tmp:clear</code> 清理以上三个文件夹；</li>
  <li><code>rake tmp:create</code> 创建会话、缓存、套接字和 PID 所需的临时文件夹；</li>
</ul>

<h3 id="miscellaneous">其他任务</h3>

<ul>
  <li><code>rake stats</code> 用来统计代码状况，显示千行代码数和测试比例等；</li>
  <li><code>rake secret</code> 会生成一个伪随机字符串，作为会话的密钥；</li>
  <li><code>rake time:zones:all</code> 列出 Rails 能理解的所有时区；</li>
</ul>

<h3 id="custom-rake-tasks">编写 Rake 任务</h3>

<p>自己编写的 Rake 任务保存在 <code>Rails.root/lib/tasks</code> 文件夹中，文件的扩展名是 <code>.rake</code>。执行 <code>bin/rails generate task</code> 命令会生成一个新的自定义任务文件。</p>

<div class="codeblock ruby"><pre class="highlight"><span class="n">desc</span> <span class="s2">"I am short, but comprehensive description for my cool task"</span>
<span class="n">task</span> <span class="ss">task_name: </span><span class="o">[</span><span class="ss">:prerequisite_task</span><span class="p">,</span> <span class="ss">:another_task_we_depend_on</span><span class="o">]</span> <span class="k">do</span>
  <span class="c1"># All your magic here</span>
  <span class="c1"># Any valid Ruby code is allowed</span>
<span class="k">end</span>
</pre>

</div>
<p>向自定义的任务中传入参数的方式如下：</p>

<div class="codeblock ruby"><pre class="highlight"><span class="n">task</span> <span class="ss">:task_name</span><span class="p">,</span> <span class="o">[</span><span class="ss">:arg_1</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:pre_1</span><span class="p">,</span> <span class="ss">:pre_2</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="p">,</span> <span class="n">args</span><span class="o">|</span>
  <span class="c1"># You can use args from here</span>
<span class="k">end</span>
</pre>

</div>
<p>任务可以分组，放入命名空间：</p>

<div class="codeblock ruby"><pre class="highlight"><span class="n">namespace</span> <span class="ss">:db</span> <span class="k">do</span>
  <span class="n">desc</span> <span class="s2">"This task does nothing"</span>
  <span class="n">task</span> <span class="ss">:nothing</span> <span class="k">do</span>
    <span class="c1"># Seriously, nothing</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre>

</div>
<p>执行任务的方法如下：</p>

<div class="codeblock bash"><pre class="highlight">rake task_name
rake <span class="s2">"task_name[value 1]"</span> <span class="c"># entire argument string should be quoted</span>
rake db:nothing
</pre>

</div>
          <div class="box information-box">
  <p>如果在任务中要和程序的模型交互，例如查询数据库等，可以使用 <code>environment</code> 任务，加载程序代码。</p>
</div>


<h2 id="the-rails-advanced-command-line">Rails 命令行高级用法</h2>

<p>Rails 命令行的高级用法就是找到实用的参数，满足特定需求或者工作流程。下面是一些常用的高级命令。</p>

<h3 id="rails-with-databases-and-scm">新建程序时指定数据库和源码管理系统</h3>

<p>新建程序时，可设置一些选项指定使用哪种数据库和源码管理系统。这么做可以节省一点时间，减少敲击键盘的次数。</p>

<p>我们来看一下 <code>--git</code> 和 <code>--database=postgresql</code> 选项有什么作用：</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>mkdir gitapp
<span class="gp">$ </span><span class="nb">cd </span>gitapp
<span class="gp">$ </span>git init
Initialized empty Git repository <span class="k">in</span> .git/
<span class="gp">$ </span>rails new . --git --database<span class="o">=</span>postgresql
      exists
      create  app/controllers
      create  app/helpers
...
...
      create  tmp/cache
      create  tmp/pids
      create  Rakefile
add <span class="s1">'Rakefile'</span>
      create  README.rdoc
add <span class="s1">'README.rdoc'</span>
      create  app/controllers/application_controller.rb
add <span class="s1">'app/controllers/application_controller.rb'</span>
      create  app/helpers/application_helper.rb
...
      create  log/test.log
add <span class="s1">'log/test.log'</span>
</pre>

</div>
<p>上面的命令先新建一个 <code>gitapp</code> 文件夹，初始化一个空的 git 仓库，然后再把 Rails 生成的文件加入仓库。再来看一下在数据库设置文件中添加了什么：</p>

<div class="codeblock bash"><pre class="highlight"><span class="gp">$ </span>cat config/database.yml
<span class="c"># PostgreSQL. Versions 8.2 and up are supported.</span>
<span class="c">#</span>
<span class="c"># Install the pg driver:</span>
<span class="c">#   gem install pg</span>
<span class="c"># On OS X with Homebrew:</span>
<span class="c">#   gem install pg -- --with-pg-config=/usr/local/bin/pg_config</span>
<span class="c"># On OS X with MacPorts:</span>
<span class="c">#   gem install pg -- --with-pg-config=/opt/local/lib/postgresql84/bin/pg_config</span>
<span class="c"># On Windows:</span>
<span class="c">#   gem install pg</span>
<span class="c">#       Choose the win32 build.</span>
<span class="c">#       Install PostgreSQL and put its /bin directory on your path.</span>
<span class="c">#</span>
<span class="c"># Configure Using Gemfile</span>
<span class="c"># gem 'pg'</span>
<span class="c">#</span>
development:
  adapter: postgresql
  encoding: unicode
  database: gitapp_development
  pool: 5
  username: gitapp
  password:
...
...
</pre>

</div>
<p>这个命令还根据我们选择的 PostgreSQL 数据库在 <code>database.yml</code> 中添加了一些设置。</p>

          <div class="box information-box">
  <p>指定源码管理系统选项时唯一的不便是，要先新建程序的文件夹，再初始化源码管理系统，然后才能执行 <code>rails new</code> 命令生成程序骨架。</p>
</div>


                    </article>
                    <div class="section-nav clearfix">
  <div class="pull-left">
    
      <a href="http://docs-china.com/rails/configuring.html" class="prev">
        &laquo;前一篇
      </a>
    
  </div>
  <div class="pull-right">
    
      <a href="http://docs-china.com/rails/caching_with_rails.html" class="next">
        后一篇&raquo;
      </a>
    
  </div>
</div>

                </main>
                <div class="sidebar col-sm-3 col-md-3 hidden-xs">
                    <aside class="ebook">
    <h4>电子书</h4>
    <p><a href="https://leanpub.com/rails-guides-cn" title="Rails 指南"><img src="http://docs-china.com/rails/images/book_cover.png" width="127" height="164" alt="Rails 指南" /></a>
    <p>pdf + epub + mobi 全平台支持</p>
</aside>

<aside class="menu">
    
    <h4>起跑</h4>
    

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/getting_started.html">Rails 入门</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


</ul>

    
    <h4>模型</h4>
    

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/active_record_basics.html">Active Record 基础</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/migrations.html">Active Record 数据库迁移</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/active_record_validations.html">Active Record 数据验证</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/active_record_callbacks.html">Active Record 回调</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/association_basics.html">Active Record 关联</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/active_record_querying.html">Active Record 查询</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


</ul>

    
    <h4>视图</h4>
    

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/action_view_overview.html">Action View 基础</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/layouts_and_rendering.html">Layouts and Rendering in Rails</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/form_helpers.html">表单帮助方法</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


</ul>

    
    <h4>控制器</h4>
    

<ul>

  

  
    
  

  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/action_controller_overview.html">Action Controller 简介</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/routing.html">Rails 路由全解</a></li>
    
  
    
  
    
  
    
  


</ul>

    
    <h4>深入</h4>
    

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/active_support_core_extensions.html">Active Support 核心扩展</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/i18n.html">Rails 国际化 API</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/action_mailer_basics.html">Action Mailer 基础</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/testing.html">Rails 程序测试指南</a></li>
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/security.html">Ruby on Rails 安全指南</a></li>
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/debugging_rails_applications.html">Rails 程序调试</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/configuring.html">Rails 程序设置</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class="current"><a href="http://docs-china.com/rails/command_line.html">Rails 命令行</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/caching_with_rails.html">Caching with Rails An overview</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/asset_pipeline.html">Asset Pipeline</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/working_with_javascript_in_rails.html">在 Rails 中使用 JavaScript</a></li>
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/engines.html">Getting Started with Engines</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/initialization.html">Rails 初始化过程</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


</ul>

    
    <h4>扩展</h4>
    

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/plugins.html">Rails 插件开发基础</a></li>
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/rails_on_rack.html">Rails on Rack</a></li>
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="http://docs-china.com/rails/generators.html">Creating and Customizing Rails Generators & Templates</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


</ul>

    
</aside>


                </div>
            </div>
        </div>
    </div>

    <footer class="footer" role="contentinfo">
        <div class="container">
            <div>
                <ul class="social">
                    <li class="github">
                        <a href="https://github.com/docs-china/rails/" title="在 GitHub 上关注我们">Github</a>
                    </li>
                    <li class="weibo">
                        <a href="http://weibo.com/docschina" title="关注我们的微博">@DocsChina</a>
                    </li>
                </ul>
            </div>

            <p>本文档授权协议：<a href="http://creativecommons.org/licenses/by-sa/3.0/deed.zh" title="CC BY-SA 3.0">CC BY-SA 3.0</a></p>
        </div>
    </footer>
</body>
</html>
